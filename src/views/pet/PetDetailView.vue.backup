<template>
  <div class="pet-detail-container">
    <!-- Î°úÎî© ÏÉÅÌÉú -->
    <div v-if="loading" class="loading-container">
      <v-progress-circular 
        indeterminate 
        size="80" 
        color="primary"
        class="loading-spinner"
      ></v-progress-circular>
      <p class="loading-text">Î∞òÎ†§ÎèôÎ¨º Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò§Îäî Ï§ë...</p>
    </div>

    <!-- Ìé´ Ï†ïÎ≥¥ ÌëúÏãú (ÏùΩÍ∏∞ Î™®Îìú) -->
    <div v-else-if="pet && !isEditMode" class="pet-detail-content">
      <!-- Î©îÏù∏ Ï†ïÎ≥¥ ÏÑπÏÖò -->
      <div class="main-info-section">
        <!-- Ï¢åÏ∏°: ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ -->
        <div class="profile-image-section">
          <v-avatar size="200" class="profile-avatar">
            <v-img
              v-if="pet.url"
              :src="pet.url"
              :alt="pet.name"
              cover
              class="pet-image"
            />
            <div v-else class="avatar-placeholder">
              <v-icon :size="100" :color="getSpeciesIconColor(pet.petOrder)" :icon="getSpeciesIcon(pet.petOrder)" />
            </div>
          </v-avatar>
          
          <!-- ÎåÄÌëú Î∞òÎ†§ÎèôÎ¨º Î∞∞ÏßÄ -->
          <div v-if="isRepresentative" class="representative-badge">
            <v-icon color="amber" size="24">mdi-star</v-icon>
            <span>ÎåÄÌëú</span>
          </div>
        </div>
        
        <!-- Ïö∞Ï∏°: Í∏∞Î≥∏ Ï†ïÎ≥¥ -->
        <div class="basic-info-section">
          <div class="info-grid">
            <div class="info-item" @click="startEditField('name')" style="cursor: pointer;">
              <div class="info-label">
                <v-icon :size="20" color="#ec4899">mdi-account</v-icon>
                Ïù¥Î¶Ñ
              </div>
              <div v-if="!editingFields.name" class="info-value">
                {{ pet.name }}
                <v-icon size="16" color="#ec4899" class="ml-2">mdi-pencil</v-icon>
              </div>
              <div v-else class="edit-field">
                <v-text-field
                  v-model="editData.name"
                  variant="outlined"
                  density="compact"
                  hide-details="auto"
                  class="inline-edit-input"
                  @keyup.enter="saveField('name')"
                  @keyup.esc="cancelEditField('name')"
                />
                <div class="edit-actions">
                  <v-btn
                    size="small"
                    color="success"
                    variant="text"
                    @click="saveField('name')"
                    class="save-btn"
                  >
                    Ï†ÄÏû•
                  </v-btn>
                  <v-btn
                    size="small"
                    color="error"
                    variant="text"
                    @click="cancelEditField('name')"
                    class="cancel-btn"
                  >
                    Ï∑®ÏÜå
                  </v-btn>
                </div>
              </div>
            </div>
            
            <div class="info-item" @click="startEditField('species')" style="cursor: pointer;">
              <div class="info-label">
                <v-icon :size="20" color="#ec4899">mdi-paw</v-icon>
                Ï¢ÖÎ•ò
              </div>
              <div v-if="!editingFields.species" class="info-value">
                {{ pet.species }}
                <v-icon size="16" color="#ec4899" class="ml-2">mdi-pencil</v-icon>
              </div>
              <div v-else class="edit-field">
                <v-autocomplete
                  v-model="editData.species"
                  :items="speciesOptions"
                  item-title="species"
                  item-value="species"
                  variant="outlined"
                  density="compact"
                  hide-details="auto"
                  class="inline-edit-input"
                  placeholder="Ï¢ÖÎ•òÎ•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî"
                  @keyup.esc="cancelEditField('species')"
                />
                <div class="edit-actions">
                  <v-btn
                    size="small"
                    color="success"
                    variant="text"
                    @click="saveField('species')"
                    class="save-btn"
                  >
                    Ï†ÄÏû•
                  </v-btn>
                  <v-btn
                    size="small"
                    color="error"
                    variant="text"
                    @click="cancelEditField('species')"
                    class="cancel-btn"
                  >
                    Ï∑®ÏÜå
                  </v-btn>
                </div>
              </div>
            </div>
            
            <div class="info-item" @click="startEditField('gender')" style="cursor: pointer;">
              <div class="info-label">
                <v-icon :size="20" color="#ec4899">mdi-gender-male</v-icon>
                ÏÑ±Î≥Ñ
              </div>
              <div v-if="!editingFields.gender" class="info-value">
                {{ getGenderLabel(pet.gender) }}
                <v-icon size="16" color="#ec4899" class="ml-2">mdi-pencil</v-icon>
              </div>
              <div v-else class="edit-field">
                <v-select
                  v-model="editData.gender"
                  :items="genderOptions"
                  item-title="title"
                  item-value="value"
                  variant="outlined"
                  density="compact"
                  hide-details="auto"
                  class="inline-edit-input"
                  placeholder="ÏÑ±Î≥ÑÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî"
                  @keyup.esc="cancelEditField('gender')"
                />
                <div class="edit-actions">
                  <v-btn
                    size="small"
                    color="success"
                    variant="text"
                    @click="saveField('gender')"
                    class="save-btn"
                  >
                    Ï†ÄÏû•
                  </v-btn>
                  <v-btn
                    size="small"
                    color="error"
                    variant="text"
                    @click="cancelEditField('gender')"
                    class="cancel-btn"
                  >
                    Ï∑®ÏÜå
                  </v-btn>
                </div>
              </div>
            </div>
            
            <div class="info-item" @click="startEditField('age')" style="cursor: pointer;">
              <div class="info-label">
                <v-icon :size="20" color="#ec4899">mdi-cake-variant</v-icon>
                ÎÇòÏù¥
              </div>
              <div v-if="!editingFields.age" class="info-value">
                {{ pet.age }}ÏÇ¥
                <v-icon size="16" color="#ec4899" class="ml-2">mdi-pencil</v-icon>
              </div>
              <div v-else class="edit-field">
                <v-text-field
                  v-model.number="editData.age"
                  type="number"
                  variant="outlined"
                  density="compact"
                  hide-details="auto"
                  class="inline-edit-input"
                  suffix="ÏÇ¥"
                  @keyup.enter="saveField('age')"
                  @keyup.esc="cancelEditField('age')"
                />
                <div class="edit-actions">
                  <v-btn
                    size="small"
                    color="success"
                    variant="text"
                    @click="saveField('age')"
                    class="save-btn"
                  >
                    Ï†ÄÏû•
                  </v-btn>
                  <v-btn
                    size="small"
                    color="error"
                    variant="text"
                    @click="cancelEditField('age')"
                    class="cancel-btn"
                  >
                    Ï∑®ÏÜå
                  </v-btn>
                </div>
              </div>
            </div>
            
            <div class="info-item" @click="startEditField('weight')" style="cursor: pointer;">
              <div class="info-label">
                <v-icon :size="20" color="#ec4899">mdi-weight</v-icon>
                Ï≤¥Ï§ë
              </div>
              <div v-if="!editingFields.weight" class="info-value">
                {{ pet.weight }}kg
                <v-icon size="16" color="#ec4899" class="ml-2">mdi-pencil</v-icon>
              </div>
              <div v-else class="edit-field">
                <v-text-field
                  v-model.number="editData.weight"
                  type="number"
                  variant="outlined"
                  density="compact"
                  hide-details="auto"
                  class="inline-edit-input"
                  suffix="kg"
                  @keyup.enter="saveField('weight')"
                  @keyup.esc="cancelEditField('weight')"
                />
                <div class="edit-actions">
                  <v-btn
                    size="small"
                    color="success"
                    variant="text"
                    @click="saveField('weight')"
                    class="save-btn"
                  >
                    Ï†ÄÏû•
                  </v-btn>
                  <v-btn
                    size="small"
                    color="error"
                    variant="text"
                    @click="cancelEditField('weight')"
                    class="cancel-btn"
                  >
                    Ï∑®ÏÜå
                  </v-btn>
                </div>
              </div>
            </div>
            
            <div class="info-item" @click="startEditField('birthday')" style="cursor: pointer;">
              <div class="info-label">
                <v-icon :size="20" color="#ec4899">mdi-calendar</v-icon>
                ÏÉùÏùº
              </div>
              <div v-if="!editingFields.birthday" class="info-value">
                {{ formatBirthday(pet.birthday) }}
                <v-icon size="16" color="#ec4899" class="ml-2">mdi-pencil</v-icon>
              </div>
              <div v-else class="edit-field">
                <v-text-field
                  v-model="editData.birthday"
                  type="date"
                  variant="outlined"
                  density="compact"
                  hide-details="auto"
                  class="inline-edit-input"
                  @keyup.esc="cancelEditField('birthday')"
                />
                <div class="edit-actions">
                  <v-btn
                    size="small"
                    color="success"
                    variant="text"
                    @click="saveField('birthday')"
                    class="save-btn"
                  >
                    Ï†ÄÏû•
                  </v-btn>
                  <v-btn
                    size="small"
                    color="error"
                    variant="text"
                    @click="cancelEditField('birthday')"
                    class="cancel-btn"
                  >
                    Ï∑®ÏÜå
                  </v-btn>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ÏÜåÍ∞úÍ∏Ä ÏÑπÏÖò -->
      <div class="introduction-section" @click="startEditField('introduce')" style="cursor: pointer;">
        <h3 class="section-title">ÏÜåÍ∞ú</h3>
        <div v-if="!editingFields.introduce" class="introduction-content">
          {{ pet.introduce || 'ÏÜåÍ∞úÍ∏ÄÏù¥ ÏóÜÏäµÎãàÎã§.' }}
          <v-icon size="16" color="#ec4899" class="ml-2">mdi-pencil</v-icon>
        </div>
        <div v-else class="edit-field">
          <v-textarea
            v-model="editData.introduce"
            variant="outlined"
            density="compact"
            hide-details="auto"
            class="inline-edit-textarea"
            rows="3"
            placeholder="ÏÜåÍ∞úÍ∏ÄÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî"
            @keyup.esc="cancelEditField('introduce')"
          />
          <div class="edit-actions">
            <v-btn
              size="small"
              color="success"
              variant="text"
              @click="saveField('introduce')"
              class="save-btn"
            >
              Ï†ÄÏû•
            </v-btn>
            <v-btn
              size="small"
              color="error"
              variant="text"
              @click="cancelEditField('introduce')"
              class="cancel-btn"
            >
              Ï∑®ÏÜå
            </v-btn>
          </div>
        </div>
      </div>

      <!-- Ïï°ÏÖò Î≤ÑÌäº ÏÑπÏÖò -->
      <div class="action-section">
        <div class="action-buttons">
          <v-btn
            v-if="!isRepresentative"
            variant="elevated"
            background="linear-gradient(135deg, #ec4899, #db2777)"
            rounded="xl"
            size="large"
            prepend-icon="mdi-star"
            @click="setAsRepresentative"
            class="action-btn primary-action"
          >
            ÎåÄÌëúÎ°ú ÏÑ§Ï†ï
          </v-btn>

          <v-btn
            variant="outlined"
            color="error"
            rounded="xl"
            size="large"
            prepend-icon="mdi-delete"
            @click="showDeleteConfirm = true"
            class="action-btn"
          >
            ÏÇ≠Ï†ú
          </v-btn>
        </div>
      </div>
    </div>

    <!-- ÏàòÏ†ï Î™®Îìú -->
    <div v-if="pet && isEditMode" class="pet-detail-content">
      <!-- Î©îÏù∏ Ï†ïÎ≥¥ ÏÑπÏÖò (ÏàòÏ†ï Î™®Îìú) -->
      <div class="main-info-section">
        <!-- Ï¢åÏ∏°: ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ (ÏàòÏ†ï Í∞ÄÎä•) -->
        <div class="profile-image-section">
          <v-avatar size="200" class="profile-avatar">
            <v-img
              v-if="editData.profileImageUrl || pet.url"
              :src="editData.profileImageUrl || pet.url"
              :alt="pet.name"
              cover
              class="pet-image"
            />
            <div v-else class="avatar-placeholder">
              <v-icon :size="100" :color="getSpeciesIconColor(pet.petOrder)" :icon="getSpeciesIcon(pet.petOrder)" />
            </div>
          </v-avatar>
          
          <!-- Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú Î≤ÑÌäº -->
          <v-btn
            icon="mdi-camera"
            size="small"
            color="#ec4899"
            class="image-upload-btn"
            @click="triggerImageUpload"
          />
          
          <input
            ref="imageInput"
            type="file"
            accept="image/*"
            @change="handleImageChange"
            style="display: none"
          />
        </div>
        
        <!-- Ïö∞Ï∏°: Í∏∞Î≥∏ Ï†ïÎ≥¥ (ÏàòÏ†ï Í∞ÄÎä•) -->
        <div class="basic-info-section">
          <div class="info-grid">
            <div class="info-item">
              <div class="info-label">
                <v-icon :size="20" color="#ec4899">mdi-account</v-icon>
                Ïù¥Î¶Ñ *
              </div>
              <v-text-field
                v-model="editData.name"
                variant="outlined"
                density="comfortable"
                hide-details="auto"
                class="edit-input"
                required
              />
            </div>
            
            <div class="info-item">
              <div class="info-label">
                <v-icon :size="20" color="#ec4899">mdi-paw</v-icon>
                Ï¢ÖÎ•ò *
              </div>
              <v-autocomplete
                v-model="editData.speciesId"
                :items="speciesOptions"
                item-title="species"
                item-value="speciesId"
                placeholder="Ï¢ÖÎ•òÎ•º Í≤ÄÏÉâÌïòÏÑ∏Ïöî"
                variant="outlined"
                density="comfortable"
                hide-details="auto"
                class="edit-input"
                required
              />
            </div>
            
            <div class="info-item">
              <div class="info-label">
                <v-icon :size="20" color="#ec4899">mdi-gender-male</v-icon>
                ÏÑ±Î≥Ñ *
              </div>
              <v-select
                v-model="editData.gender"
                :items="genderOptions"
                item-title="title"
                item-value="value"
                placeholder="ÏÑ±Î≥ÑÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî"
                variant="outlined"
                density="comfortable"
                hide-details="auto"
                class="edit-input"
                required
              />
            </div>
            
            <div class="info-item">
              <div class="info-label">
                <v-icon :size="20" color="#ec4899">mdi-cake-variant</v-icon>
                ÎÇòÏù¥ *
              </div>
              <v-text-field
                v-model.number="editData.age"
                type="number"
                variant="outlined"
                density="comfortable"
                hide-details="auto"
                class="edit-input"
                required
              />
            </div>
            
            <div class="info-item">
              <div class="info-label">
                <v-icon :size="20" color="#ec4899">mdi-weight</v-icon>
                Ï≤¥Ï§ë (kg) *
              </div>
              <v-text-field
                v-model.number="editData.weight"
                type="number"
                variant="outlined"
                density="comfortable"
                hide-details="auto"
                class="edit-input"
                suffix="kg"
                required
              />
            </div>
            
            <div class="info-item">
              <div class="info-label">
                <v-icon :size="20" color="#ec4899">mdi-calendar</v-icon>
                ÏÉùÏùº
              </div>
              <v-text-field
                v-model="editData.birthday"
                type="date"
                variant="outlined"
                density="comfortable"
                hide-details="auto"
                class="edit-input"
              />
            </div>
          </div>
        </div>
      </div>

      <!-- ÏÜåÍ∞úÍ∏Ä ÏÑπÏÖò (ÏàòÏ†ï Í∞ÄÎä•) -->
      <div class="introduction-section">
        <h3 class="section-title">ÏÜåÍ∞ú</h3>
        <v-textarea
          v-model="editData.introduce"
          variant="outlined"
          rows="4"
          auto-grow
          placeholder="Î∞òÎ†§ÎèôÎ¨ºÏóê ÎåÄÌïú ÏÜåÍ∞úÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî"
          class="edit-textarea"
        />
      </div>

      <!-- Ïï°ÏÖò Î≤ÑÌäº ÏÑπÏÖò (ÏàòÏ†ï Î™®Îìú) -->
      <div class="action-section">
        <div class="action-buttons">
          <v-btn
            v-if="!isRepresentative"
            variant="elevated"
            background="linear-gradient(135deg, #ec4899, #db2777)"
            rounded="xl"
            size="large"
            prepend-icon="mdi-star"
            @click="setAsRepresentative"
            class="action-btn primary-action"
          >
            ÎåÄÌëúÎ°ú ÏÑ§Ï†ï
          </v-btn>
          <v-btn
            variant="outlined"
            color="error"
            rounded="xl"
            size="large"
            prepend-icon="mdi-close"
            @click="cancelEdit"
            class="action-btn"
          >
            Ï∑®ÏÜå
          </v-btn>
          <v-btn
            :disabled="!isFormDirty"
            variant="elevated"
            background="linear-gradient(135deg, #ec4899, #db2777)"
            rounded="xl"
            size="large"
            prepend-icon="mdi-content-save"
            @click="saveEdit"
            class="action-btn"
          >
            ÏàòÏ†ï
          </v-btn>
          <v-btn
            variant="outlined"
            color="error"
            rounded="xl"
            size="large"
            prepend-icon="mdi-delete"
            @click="showDeleteConfirm = true"
            class="action-btn"
          >
            ÏÇ≠Ï†ú
          </v-btn>
        </div>
      </div>
    </div>



    <!-- ÏÇ≠Ï†ú ÌôïÏù∏ Î™®Îã¨ -->
    <ModalDialog
      v-model="showDeleteConfirm"
      title="Î∞òÎ†§ÎèôÎ¨º ÏÇ≠Ï†ú"
      :max-width="500"
    >
      <div class="delete-confirm-content">
        <div class="delete-icon-container">
          <v-icon size="64" color="error">mdi-delete-alert</v-icon>
        </div>
        <h3 class="text-h5 mb-3">Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?</h3>
        <p class="text-body-1 text-grey-darken-1 mb-4">
          <strong>"{{ pet?.name }}"</strong>ÏùÑ(Î•º) ÏÇ≠Ï†úÌïòÎ©¥ Î≥µÍµ¨Ìï† Ïàò ÏóÜÏäµÎãàÎã§.
        </p>
        <div class="delete-warning">
          <v-icon size="20" color="warning" class="mr-2">mdi-alert</v-icon>
          <span>Ïù¥ ÏûëÏóÖÏùÄ ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§.</span>
        </div>
      </div>
      
      <template #actions>
        <div class="delete-actions">
          <v-btn
            variant="outlined"
            @click="showDeleteConfirm = false"
            size="large"
            rounded="xl"
          >
            Ï∑®ÏÜå
          </v-btn>
          <v-btn
            color="error"
            @click="deletePet"
            :loading="deleting"
            size="large"
            rounded="xl"
            prepend-icon="mdi-delete"
          >
            ÏÇ≠Ï†ú
          </v-btn>
        </div>
      </template>
    </ModalDialog>

    <!-- ÏÑ±Í≥µ/ÏóêÎü¨ Î©îÏãúÏßÄ -->
    <v-snackbar
      v-model="showSnackbar"
      :color="snackbarColor"
      timeout="4000"
      location="top"
      rounded="lg"
    >
      <div class="d-flex align-center">
        <v-icon class="me-3">{{ snackbarIcon }}</v-icon>
        <span class="font-weight-medium">{{ snackbarMessage }}</span>
      </div>
    </v-snackbar>
  </div>
</template>

<script setup>
import { ref, computed, onMounted } from 'vue'
import { useRoute, useRouter } from 'vue-router'
import { usePetStore } from '@/stores/pet'

import ModalDialog from '@/components/ui/organisms/ModalDialog.vue'

const route = useRoute()
const router = useRouter()
const petStore = usePetStore()

// Î∞òÏùëÌòï Îç∞Ïù¥ÌÑ∞
const pet = ref(null)
const loading = ref(true)
const isEditMode = ref(false)
const showDeleteConfirm = ref(false)
const deleting = ref(false)
const showSnackbar = ref(false)
const snackbarMessage = ref('')
const snackbarColor = ref('success')
const snackbarIcon = ref('mdi-check-circle')

// Ìï≠Î™©Î≥Ñ Ìé∏Ïßë ÏÉÅÌÉú Í¥ÄÎ¶¨
const editingFields = ref({
  name: false,
  species: false,
  gender: false,
  age: false,
  weight: false,
  birthday: false,
  introduce: false
})

// ÏàòÏ†ï Î™®Îìú Îç∞Ïù¥ÌÑ∞
const editData = ref({
  name: '',
  speciesId: null,
  species: '',
  gender: '',
  age: null,
  weight: null,
  birthday: null,
  introduce: '',
  profileImageUrl: null,
  imageFile: null
})
const imageInput = ref(null)

// Ï¢ÖÎ•ò ÏòµÏÖò
const speciesOptions = computed(() => {
  const species = petStore.getSpecies
  
  if (species && species.length > 0) {
    // Î∞±ÏóîÎìú Îç∞Ïù¥ÌÑ∞ Íµ¨Ï°∞Ïóê ÎßûÍ≤å Îß§Ìïë
    return species.map(s => ({
      species: s.species,
      speciesId: s.id || s.speciesId || null
    }))
  }
  return []
})

// ÏÑ±Î≥Ñ ÏòµÏÖò
const genderOptions = [
  { value: 'MALE', title: 'ÏàòÏª∑' },
  { value: 'FEMALE', title: 'ÏïîÏª∑' },
  { value: 'NEUTRALITY', title: 'Ï§ëÏÑ±' }
]

// computed properties
const isRepresentative = computed(() => {
  if (!pet.value || !petStore.representativePet) return false
  return pet.value.id === petStore.representativePet.id
})



// Í≥ÑÏÇ∞Îêú ÏÜçÏÑ±
const petId = computed(() => route.params.id)

// ÏàòÏ†ï Î™®Îìú computed
const isFormDirty = computed(() => {
  if (!pet.value) return false
  
  return (
    editData.value.name !== pet.value.name ||
    editData.value.species !== pet.value.species ||
    editData.value.gender !== pet.value.gender ||
    editData.value.age !== pet.value.age ||
    editData.value.weight !== pet.value.weight ||
    editData.value.birthday !== pet.value.birthday ||
    editData.value.introduce !== pet.value.introduce ||
    editData.value.imageFile !== null
  )
})

// Ìï≠Î™©Î≥Ñ Ìé∏Ïßë ÏãúÏûë
const startEditField = (fieldName) => {
  console.log(`üîÑ ${fieldName} Ìï≠Î™© Ìé∏Ïßë ÏãúÏûë`)
  
  // ÌòÑÏû¨ Ìé´ Îç∞Ïù¥ÌÑ∞Î•º Ìé∏Ïßë Îç∞Ïù¥ÌÑ∞Î°ú Î≥µÏÇ¨
  editData.value[fieldName] = pet.value[fieldName]
  
  // Ìï¥Îãπ Ìï≠Î™©Îßå Ìé∏Ïßë Î™®ÎìúÎ°ú Ï†ÑÌôò
  editingFields.value[fieldName] = true
  
  console.log(`${fieldName} Ìé∏Ïßë Îç∞Ïù¥ÌÑ∞:`, editData.value[fieldName])
}

// Ìï≠Î™©Î≥Ñ Ìé∏Ïßë Ï∑®ÏÜå
const cancelEditField = (fieldName) => {
  console.log(`‚ùå ${fieldName} Ìï≠Î™© Ìé∏Ïßë Ï∑®ÏÜå`)
  
  // Ìé∏Ïßë Îç∞Ïù¥ÌÑ∞ Ï¥àÍ∏∞Ìôî
  editData.value[fieldName] = pet.value[fieldName]
  
  // Ìé∏Ïßë Î™®Îìú Ìï¥Ï†ú
  editingFields.value[fieldName] = false
}

// Ìï≠Î™©Î≥Ñ Ï†ÄÏû•
const saveField = async (fieldName) => {
  console.log(`üíæ ${fieldName} Ìï≠Î™© Ï†ÄÏû• ÏãúÏûë`)
  
  try {
    // Î∞±ÏóîÎìú API Ìò∏Ï∂ú (Í∏∞Ï°¥ Î°úÏßÅ ÏÇ¨Ïö©)
    const updateData = { [fieldName]: editData.value[fieldName] }
    
    // birthday ÌòïÏãù Ï†ïÍ∑úÌôî
    if (fieldName === 'birthday' && updateData.birthday) {
      if (typeof updateData.birthday === 'string' && updateData.birthday.includes('.')) {
        updateData.birthday = updateData.birthday.replace(/\./g, ' ').trim().replace(/\s+/g, '-')
      }
    }
    
    await petStore.updatePet(pet.value.id, updateData)
    
    // ÏÑ±Í≥µ Ïãú Ìé∏Ïßë Î™®Îìú Ìï¥Ï†ú
    editingFields.value[fieldName] = false
    
    // Ìé´ Îç∞Ïù¥ÌÑ∞ ÏÉàÎ°úÍ≥†Ïπ®
    await loadPet()
    
    showMessage(`${fieldName}Ïù¥(Í∞Ä) ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§.`, 'success')
    console.log(`‚úÖ ${fieldName} Ìï≠Î™© Ï†ÄÏû• ÏôÑÎ£å`)
    
  } catch (error) {
    console.error(`${fieldName} Ìï≠Î™© Ï†ÄÏû• Ïã§Ìå®:`, error)
    showMessage(`${fieldName} ÏàòÏ†ïÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.`, 'error')
  }
}

// Ìé´ Ï†ïÎ≥¥ Î°úÎìú
const loadPet = async () => {
  if (!petId.value) {
    console.error('Ìé´ IDÍ∞Ä ÏóÜÏäµÎãàÎã§:', petId.value)
    return
  }
  
  try {
    loading.value = true
    console.log('=== Ìé´ ÏÉÅÏÑ∏ Î°úÎî© ÎîîÎ≤ÑÍπÖ ===')
    console.log('ÏöîÏ≤≠Îêú Ìé´ ID:', petId.value)
    console.log('Ìé´ ID ÌÉÄÏûÖ:', typeof petId.value)
    
    // Ìé´ Î™©Î°ùÏù¥ ÏóÜÎã§Î©¥ Î®ºÏ†Ä Î°úÎìú
    if (petStore.getPets.length === 0) {
      console.log('Ìé´ Î™©Î°ùÏù¥ ÎπÑÏñ¥ÏûàÏùå, Ìé´ Î™©Î°ùÏùÑ Îã§Ïãú Î°úÎìúÌï©ÎãàÎã§...')
      await petStore.fetchPets()
    }
    
    const allPets = petStore.getPets
    console.log('Ï†ÑÏ≤¥ Ìé´ Î™©Î°ù:', allPets)
    console.log('Ìé´ Î™©Î°ù Í∞úÏàò:', allPets.length)
    
    // ID Îß§Ïπ≠ (Î¨∏ÏûêÏó¥Í≥º Ïà´Ïûê Î™®Îëê Í≥†Î†§)
    pet.value = allPets.find(p => {
      console.log(`Ìé´ ID ÎπÑÍµê: ${p.id} (${typeof p.id}) vs ${petId.value} (${typeof petId.value})`)
      return p.id == petId.value || String(p.id) === String(petId.value)
    })
    
    console.log('Ï∞æÏùÄ Ìé´:', pet.value)
    
    if (!pet.value) {
      console.error('Ìé´ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§!')
      console.log('ÏÇ¨Ïö© Í∞ÄÎä•Ìïú Ìé´ IDÎì§:', allPets.map(p => p.id))
    }
    
    console.log('=== Ìé´ ÏÉÅÏÑ∏ Î°úÎî© ÎîîÎ≤ÑÍπÖ ÎÅù ===')
  } catch (error) {
    console.error('Ìé´ Ï†ïÎ≥¥ Î°úÎìú Ïã§Ìå®:', error)
    showMessage('Ìé´ Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò§ÎäîÎç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error')
  } finally {
    loading.value = false
  }
}

// ÏàòÏ†ï Î™®Îìú Ï¢ÖÎ£å


// ÎåÄÌëú Î∞òÎ†§ÎèôÎ¨º ÏÑ§Ï†ï
const setAsRepresentative = async () => {
  if (!pet.value) return
  
  try {
    const result = await petStore.setRepresentativePet(pet.value)
    
    if (result.success) {
      showMessage('ÎåÄÌëú Î∞òÎ†§ÎèôÎ¨ºÏù¥ ÏÑ§Ï†ïÎêòÏóàÏäµÎãàÎã§.', 'success')
      // Ìé´ Ï†ïÎ≥¥ ÏÉàÎ°úÍ≥†Ïπ®
      loadPet()
    } else {
      showMessage(result.message || 'ÎåÄÌëú Î∞òÎ†§ÎèôÎ¨º ÏÑ§Ï†ïÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error')
    }
  } catch (error) {
    console.error('ÎåÄÌëú Î∞òÎ†§ÎèôÎ¨º ÏÑ§Ï†ï Ïã§Ìå®:', error)
    showMessage('ÎåÄÌëú Î∞òÎ†§ÎèôÎ¨º ÏÑ§Ï†ïÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error')
  }
}

// Ìé´ ÏÇ≠Ï†ú
const deletePet = async () => {
  if (!pet.value) return
  
  try {
    deleting.value = true
    const result = await petStore.deletePet(pet.value.id)
    
    if (result.success) {
      showMessage('Î∞òÎ†§ÎèôÎ¨ºÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.', 'success')
      // Î™©Î°ù ÌéòÏù¥ÏßÄÎ°ú Ïù¥Îèô
      setTimeout(() => {
        router.push('/pets')
      }, 1500)
    } else {
      showMessage(result.message || 'Î∞òÎ†§ÎèôÎ¨º ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error')
    }
  } catch (error) {
    console.error('Ìé´ ÏÇ≠Ï†ú Ïã§Ìå®:', error)
    showMessage('Î∞òÎ†§ÎèôÎ¨º ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error')
  } finally {
    deleting.value = false
    showDeleteConfirm.value = false
  }

}

// Î©îÏãúÏßÄ ÌëúÏãú
const showMessage = (message, type = 'success') => {
  snackbarMessage.value = message
  snackbarColor.value = type
  snackbarIcon.value = type === 'success' ? 'mdi-check-circle' : 'mdi-alert-circle'
  showSnackbar.value = true
}

// Ï¢ÖÎ•òÏóê Îî∞Î•∏ ÏïÑÏù¥ÏΩò Î∞òÌôò (Î∞±ÏóîÎìú ÏùëÎãµÏùò petOrder ÏßÅÏ†ë ÏÇ¨Ïö©)
const getSpeciesIcon = (petOrder) => {
  if (petOrder === 'Í∞ïÏïÑÏßÄ') return 'mdi-dog'
  if (petOrder === 'Í≥†ÏñëÏù¥') return 'mdi-cat'
  return 'mdi-paw'
}

// Ï¢ÖÎ•òÏóê Îî∞Î•∏ ÏïÑÏù¥ÏΩò ÏÉâÏÉÅ Î∞òÌôò (Î∞±ÏóîÎìú ÏùëÎãµÏùò petOrder ÏßÅÏ†ë ÏÇ¨Ïö©)
const getSpeciesIconColor = (petOrder) => {
  if (petOrder === 'Í∞ïÏïÑÏßÄ') return 'primary'
  if (petOrder === 'Í≥†ÏñëÏù¥') return 'secondary'
  return 'info'
}

const getGenderLabel = (gender) => {
  if (!gender) return 'Ïïå Ïàò ÏóÜÏùå'
  if (gender === 'MALE') return 'ÏàòÏª∑'
  if (gender === 'FEMALE') return 'ÏïîÏª∑'
  if (gender === 'NEUTRALITY') return 'Ï§ëÏÑ±'
  return 'Ïïå Ïàò ÏóÜÏùå'
}

const formatBirthday = (birthday) => {
  if (!birthday) return 'Ïïå Ïàò ÏóÜÏùå'
  
  // Ïù¥ÎØ∏ 'YYYY. MM. DD.' ÌòïÏãùÏù∏ Í≤ΩÏö∞ Í∑∏ÎåÄÎ°ú Î∞òÌôò
  if (typeof birthday === 'string' && birthday.includes('.')) {
    return birthday
  }
  
  // Date Í∞ùÏ≤¥Î°ú Î≥ÄÌôòÌïòÏó¨ ÌòïÏãùÌôî
  try {
    const date = new Date(birthday)
    if (isNaN(date.getTime())) return 'Ïïå Ïàò ÏóÜÏùå'
    return `${date.getFullYear()}. ${String(date.getMonth() + 1).padStart(2, '0')}. ${String(date.getDate()).padStart(2, '0')}.`
  } catch (error) {
    return 'Ïïå Ïàò ÏóÜÏùå'
  }
}

// ÏàòÏ†ï Î™®Îìú Î©îÏÑúÎìúÎì§
const enterEditMode = () => {
  console.log('üîÑ ÏàòÏ†ï Î™®Îìú ÏßÑÏûÖ')
  
  // ÌòÑÏû¨ Ìé´ Îç∞Ïù¥ÌÑ∞Î•º ÏàòÏ†ï Îç∞Ïù¥ÌÑ∞Î°ú Î≥µÏÇ¨
  Object.assign(editData.value, {
    name: pet.value.name || '',
    species: pet.value.species || '',
    gender: pet.value.gender || '',
    age: pet.value.age || null,
    weight: pet.value.weight || null,
    birthday: pet.value.birthday || null,
    introduce: pet.value.introduce || '',
    profileImageUrl: null,
    imageFile: null
  })
  
  // Ï¢ÖÎ•ò ID Ï∞æÍ∏∞ (speciesOptionsÏóêÏÑú ÌòÑÏû¨ Ìé´Ïùò Ï¢ÖÎ•òÏôÄ ÏùºÏπòÌïòÎäî Í≤É Ï∞æÍ∏∞)
  if (speciesOptions.value.length > 0) {
    const matchingSpecies = speciesOptions.value.find(s => s.species === pet.value.species)
    if (matchingSpecies) {
      editData.value.speciesId = matchingSpecies.speciesId
      console.log('‚úÖ Ï¢ÖÎ•ò ID Ï∞æÏùå:', matchingSpecies.speciesId, 'Ï¢ÖÎ•ò:', matchingSpecies.species)
    } else {
      console.log('‚ö†Ô∏è Ï¢ÖÎ•ò IDÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏùå:', pet.value.species)
    }
  }
  
  // birthday ÌòïÏãù Ï†ïÍ∑úÌôî (YYYY-MM-DDÎ°ú Î≥ÄÌôò)
  if (editData.value.birthday && typeof editData.value.birthday === 'string') {
    if (editData.value.birthday.includes('.')) {
      // '2025. 08. 28.' -> '2025-08-28'
      editData.value.birthday = editData.value.birthday.replace(/\./g, ' ').trim().replace(/\s+/g, '-')
    }
  }
  
  isEditMode.value = true
  console.log('‚úÖ ÏàòÏ†ï Îç∞Ïù¥ÌÑ∞ Ï¥àÍ∏∞Ìôî ÏôÑÎ£å:', editData.value)
}

const cancelEdit = () => {
  console.log('üîÑ ÏàòÏ†ï Î™®Îìú Ï∑®ÏÜå')
  isEditMode.value = false
  
  // ÏàòÏ†ï Îç∞Ïù¥ÌÑ∞ Ï¥àÍ∏∞Ìôî
  Object.assign(editData.value, {
    name: '',
    species: '',
    gender: '',
    age: null,
    weight: null,
    birthday: null,
    introduce: '',
    profileImageUrl: null,
    imageFile: null
  })
  
  console.log('‚úÖ ÏàòÏ†ï Î™®Îìú Ï∑®ÏÜå ÏôÑÎ£å')
}

const saveEdit = async () => {
  if (!isFormDirty.value) {
    showMessage('Î≥ÄÍ≤ΩÎêú ÎÇ¥Ïö©Ïù¥ ÏóÜÏäµÎãàÎã§.', 'warning')
    return
  }
  
  console.log('üîÑ ÏàòÏ†ï Ï†ÄÏû• ÏãúÏûë')
  
  try {
    // ÏàòÏ†ïÌï† Îç∞Ïù¥ÌÑ∞ Ï§ÄÎπÑ
    const updateData = {
      name: editData.value.name,
      species: editData.value.species,
      gender: editData.value.gender,
      age: editData.value.age,
      weight: editData.value.weight,
      birthday: editData.value.birthday,
      introduce: editData.value.introduce
    }
    
    // birthday ÌòïÏãù Ï†ïÍ∑úÌôî (YYYY-MM-DDÎ°ú Î≥ÄÌôò)
    if (updateData.birthday && typeof updateData.birthday === 'string') {
      if (updateData.birthday.includes('.')) {
        // '2025. 08. 28.' -> '2025-08-28'
        updateData.birthday = updateData.birthday.replace(/\./g, ' ').trim().replace(/\s+/g, '-')
      }
    }
    
    // Ïù¥ÎØ∏ÏßÄÍ∞Ä Î≥ÄÍ≤ΩÎêú Í≤ΩÏö∞ FormData ÏÇ¨Ïö©
    let payload = updateData
    if (editData.value.imageFile) {
      const form = new FormData()
      Object.keys(updateData).forEach(key => {
        if (updateData[key] != null) {
          form.append(key, updateData[key])
        }
      })
      form.append('profileImage', editData.value.imageFile)
      payload = form
    }
    
    // API Ìò∏Ï∂ú
    const result = await petStore.updatePet(pet.value.id, payload)
    
    if (result.success) {
      showMessage('Î∞òÎ†§ÎèôÎ¨º Ï†ïÎ≥¥Í∞Ä ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§.', 'success')
      
      // ÏàòÏ†ï Î™®Îìú Ï¢ÖÎ£å
      isEditMode.value = false
      
      // Ìé´ Îç∞Ïù¥ÌÑ∞ ÏÉàÎ°úÍ≥†Ïπ®
      await loadPet()
    } else {
      showMessage(result.message || 'ÏàòÏ†ïÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error')
    }
  } catch (error) {
    console.error('ÏàòÏ†ï Ï†ÄÏû• Ïã§Ìå®:', error)
    showMessage('ÏàòÏ†ï Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.', 'error')
  }
}

// Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú Í¥ÄÎ†® Î©îÏÑúÎìúÎì§
const triggerImageUpload = () => {
  imageInput.value?.click()
}

const handleImageChange = (event) => {
  const file = event.target.files[0]
  if (file) {
    if (file.size > 5 * 1024 * 1024) {
      showMessage('Ïù¥ÎØ∏ÏßÄ ÌÅ¨Í∏∞Îäî 5MB Ïù¥ÌïòÎ°ú ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.', 'error')
      return
    }
    
    if (!file.type.startsWith('image/')) {
      showMessage('Ïù¥ÎØ∏ÏßÄ ÌååÏùºÎßå ÏóÖÎ°úÎìúÌï† Ïàò ÏûàÏäµÎãàÎã§.', 'error')
      return
    }
    
    // ÎØ∏Î¶¨Î≥¥Í∏∞ URL ÏÉùÏÑ±
    if (editData.value.profileImageUrl) {
      URL.revokeObjectURL(editData.value.profileImageUrl)
    }
    
    editData.value.profileImageUrl = URL.createObjectURL(file)
    editData.value.imageFile = file
    
    showMessage('Ïù¥ÎØ∏ÏßÄÍ∞Ä ÏÑ†ÌÉùÎêòÏóàÏäµÎãàÎã§.', 'success')
  }
}

// Ïª¥Ìè¨ÎÑåÌä∏ ÎßàÏö¥Ìä∏ Ïãú Îç∞Ïù¥ÌÑ∞ Î°úÎìú
onMounted(async () => {
  console.log('PetDetailView ÎßàÏö¥Ìä∏Îê®, Ìé´ ID:', petId.value)
  
  // Ìé´ Î™©Î°ùÏù¥ Î°úÎìúÎêòÏßÄ ÏïäÏïòÎã§Î©¥ Î®ºÏ†Ä Î°úÎìú
  if (petStore.getPets.length === 0) {
    console.log('Ìé´ Î™©Î°ùÏù¥ ÎπÑÏñ¥ÏûàÏùå, Ìé´ Î™©Î°ù Î°úÎìú Ï§ë...')
    await petStore.fetchPets()
  }
  
  // Ï¢ÖÎ•ò Îç∞Ïù¥ÌÑ∞ Î°úÎìú
  await petStore.fetchSpecies()
  
  await loadPet()
  
  // 5Ï¥à ÌõÑÏóêÎèÑ Ìé´ÏùÑ Ï∞æÏßÄ Î™ªÌñàÎã§Î©¥ Î™©Î°ùÏúºÎ°ú Î¶¨Îã§Ïù¥Î†âÌä∏ (ÏÑ†ÌÉùÏÇ¨Ìï≠)
  // setTimeout(() => {
  //   if (!pet.value && !loading.value) {
  //     console.log('Ìé´ÏùÑ Ï∞æÏßÄ Î™ªÌï¥ Î™©Î°ùÏúºÎ°ú Î¶¨Îã§Ïù¥Î†âÌä∏Ìï©ÎãàÎã§.')
  //     router.push('/pets')
  //   }
  // }, 5000)
})
</script>

<style scoped>
.pet-detail-container {
  min-height: 100vh;
  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%);
  padding: 32px 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
  overflow: hidden;
}

.pet-detail-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: 
    radial-gradient(circle at 20% 80%, rgba(232, 125, 125, 0.03) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(236, 72, 153, 0.03) 0%, transparent 50%),
    radial-gradient(circle at 40% 40%, rgba(251, 191, 36, 0.02) 0%, transparent 50%);
  pointer-events: none;
}

.loading-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  width: 100%;
  background-color: #fafafa;
}

.loading-spinner {
  margin-bottom: 20px;
}

.loading-text {
  font-size: 1.2rem;
  color: #6b7280;
}

.pet-detail-content {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 32px;
  box-sizing: border-box;
  background: white;
  border-radius: 20px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  border: 1px solid #e9ecef;
  overflow: hidden;
  position: relative;
}

/* ÌûàÏñ¥Î°ú ÏÑπÏÖò */
.pet-hero-section {
  position: relative;
  height: 400px;
  border-radius: 20px;
  overflow: hidden;
  margin-bottom: 30px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  display: flex;
  align-items: center;
  justify-content: center;
  background: #ffffff;
  border: 1px solid #e5e7eb;
}

.hero-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #ffffff;
  opacity: 1;
  z-index: -1;
}

.hero-content {
  position: relative;
  z-index: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  background: transparent;
}

.pet-avatar-container {
  position: relative;
  margin-bottom: 20px;
}

.pet-avatar-wrapper {
  position: relative;
}

.pet-avatar {
  border: 5px solid white;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
}

.avatar-placeholder {
  height: 160px;
  width: 160px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
  border-radius: 50%;
  border: 1px solid var(--v-border-color);
}

.representative-badge {
  position: absolute;
  top: 15px;
  right: 15px;
  background: linear-gradient(135deg, #fbbf24, #f59e0b);
  color: white;
  padding: 10px 16px;
  border-radius: 25px;
  font-size: 0.85rem;
  font-weight: 800;
  display: flex;
  align-items: center;
  gap: 6px;
  box-shadow: 0 8px 24px rgba(251, 191, 36, 0.4);
  z-index: 10;
  border: 2px solid rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  animation: badgeGlow 2s ease-in-out infinite alternate;
}

@keyframes badgeGlow {
  0% {
    box-shadow: 0 8px 24px rgba(251, 191, 36, 0.4);
  }
  100% {
    box-shadow: 0 8px 24px rgba(251, 191, 36, 0.6), 0 0 20px rgba(251, 191, 36, 0.3);
  }
}

.pet-info-header {
  text-align: center;
  color: #374151;
  padding: 0 20px;
}

.pet-name {
  font-size: 3.5rem;
  font-weight: 900;
  margin-bottom: 10px;
  color: #111827;
}

.pet-species {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--v-theme-on-surface-variant);
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
}

.pet-description {
  font-size: 1.1rem;
  margin-top: 15px;
  color: #6b7280;
}

.action-section {
  display: flex;
  justify-content: center;
  margin-bottom: 30px;
  padding: 0 20px;
}

.action-buttons {
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
  justify-content: center;
}

.action-btn {
  border-radius: 12px;
  font-weight: 600;
  text-transform: none;
  letter-spacing: 0.5px;
  padding: 12px 24px;
  font-size: 1rem;
  transition: all 0.3s ease;
}

.primary-action {
  background: linear-gradient(135deg, var(--v-theme-primary), var(--v-theme-secondary));
  color: white;
  box-shadow: 0 4px 15px rgba(var(--v-theme-primary), 0.3);
}

.primary-action:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(var(--v-theme-primary), 0.4);
}

.info-section {
  padding: 0 20px 30px;
}

.section-title {
  font-size: 2rem;
  font-weight: 800;
  color: var(--v-theme-on-surface);
  margin-bottom: 25px;
  text-align: center;
  position: relative;
  padding-bottom: 10px;
}

.section-title::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 80px;
  height: 4px;
  background: linear-gradient(90deg, var(--v-theme-primary), var(--v-theme-secondary));
  border-radius: 2px;
}

.info-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 25px;
  padding: 0 10px;
}

.info-card {
  background: #ffffff;
  border: 1px solid #e5e7eb;
  border-radius: 15px;
  padding: 20px;
  display: flex;
  align-items: center;
  gap: 15px;
  transition: all 0.3s ease;
}

.info-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
}

.card-icon {
  background: rgba(99, 102, 241, 0.1);
  border-radius: 10px;
  padding: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.card-icon .v-icon {
  font-size: 2.5rem;
  color: #6366f1;
}

.card-content {
  flex-grow: 1;
}

.card-label {
  font-size: 1rem;
  font-weight: 600;
  color: var(--v-theme-on-surface-variant);
  margin-bottom: 5px;
}

.card-value {
  font-size: 1.2rem;
  font-weight: 700;
  color: var(--v-theme-on-surface);
}

.bottom-actions {
  padding: 0 20px 30px;
  text-align: center;
}

.back-btn {
  border-radius: 12px;
  font-weight: 600;
  text-transform: none;
  letter-spacing: 0.5px;
  padding: 12px 24px;
  font-size: 1rem;
  transition: all 0.3s ease;
}

.back-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 15px rgba(99, 102, 241, 0.2);
}

.edit-mode-container {
  padding: 0 20px 30px;
}

.edit-card {
  background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
  border: 1px solid var(--v-border-color);
  transition: all 0.3s ease;
}

.edit-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
}

.edit-header {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 24px 24px 16px;
  border-bottom: none;
  background: transparent;
}

.edit-title {
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
}

.edit-title .text-h4 {
  color: #374151;
  font-weight: 600;
  margin: 0;
}

.close-btn {
  padding: 8px;
}

.edit-content {
  padding: 24px;
}



/* ÏÉàÎ°úÏö¥ Î†àÏù¥ÏïÑÏõÉ Ïä§ÌÉÄÏùº */
.main-info-section {
  display: flex;
  gap: 60px;
  margin-bottom: 60px;
  align-items: flex-start;
  padding: 30px 0;
  position: relative;
}

.main-info-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 80px;
  height: 4px;
  background: linear-gradient(90deg, #E87D7D, #ec4899);
  border-radius: 2px;
  opacity: 0.3;
}

.profile-image-section {
  position: relative;
  flex-shrink: 0;
  padding: 30px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(248, 250, 252, 0.9) 100%);
  border-radius: 24px;
  border: 1px solid rgba(232, 125, 125, 0.1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
  backdrop-filter: blur(10px);
}

.profile-avatar {
  border: 8px solid rgba(232, 125, 125, 0.15);
  box-shadow: 0 20px 40px rgba(232, 125, 125, 0.25);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
}

.profile-avatar::before {
  content: '';
  position: absolute;
  top: -8px;
  left: -8px;
  right: -8px;
  bottom: -8px;
  background: linear-gradient(135deg, #E87D7D, #ec4899);
  border-radius: 50%;
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: -1;
}

.profile-avatar:hover {
  transform: scale(1.08) rotate(2deg);
  box-shadow: 0 30px 60px rgba(232, 125, 125, 0.4);
  border-color: rgba(232, 125, 125, 0.3);
}

.profile-avatar:hover::before {
  opacity: 0.1;
}

.image-upload-btn {
  position: absolute;
  bottom: 10px;
  right: 10px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.basic-info-section {
  flex: 1;
}

.info-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 28px;
  position: relative;
}

.info-grid::before {
  content: '';
  position: absolute;
  top: -20px;
  left: 50%;
  transform: translateX(-50%);
  width: 120px;
  height: 2px;
  background: linear-gradient(90deg, transparent, #E87D7D, transparent);
  border-radius: 1px;
}

.info-item {
  background: linear-gradient(145deg, #ffffff 0%, #f8fafc 50%, #f1f5f9 100%);
  padding: 28px;
  border-radius: 24px;
  border: 1px solid rgba(226, 232, 240, 0.8);
  transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
  position: relative;
  overflow: hidden;
  backdrop-filter: blur(10px);
}

.info-item:nth-child(odd) {
  transform: translateY(0);
}

.info-item:nth-child(even) {
  transform: translateY(0);
}

.info-item:nth-child(odd):hover {
  transform: translateY(-6px) rotate(-1deg);
}

.info-item:nth-child(even):hover {
  transform: translateY(-6px) rotate(1deg);
}

.info-item::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, #E87D7D, #ec4899, #fbbf24);
  opacity: 0;
  transition: all 0.4s ease;
  transform: scaleX(0);
  transform-origin: left;
}

.info-item::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(circle at 50% 0%, rgba(232, 125, 125, 0.05) 0%, transparent 70%);
  opacity: 0;
  transition: opacity 0.4s ease;
}

.info-item:hover {
  border-color: #E87D7D;
  box-shadow: 0 20px 40px rgba(232, 125, 125, 0.25);
  background: linear-gradient(145deg, #ffffff 0%, #fef7f7 50%, #fdf2f2 100%);
}

.info-item:hover::before {
  opacity: 1;
  transform: scaleX(1);
}

.info-item:hover::after {
  opacity: 1;
}

.info-label {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 16px;
  font-weight: 700;
  color: #4b5563;
  font-size: 0.95rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.info-label .v-icon {
  background: linear-gradient(135deg, #E87D7D, #ec4899, #fbbf24);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  filter: drop-shadow(0 2px 4px rgba(232, 125, 125, 0.3));
  transition: all 0.3s ease;
  transform: scale(1);
}

.info-item:hover .info-label .v-icon {
  transform: scale(1.1) rotate(5deg);
  filter: drop-shadow(0 4px 8px rgba(232, 125, 125, 0.5));
}

.info-value {
  font-size: 1.25rem;
  font-weight: 800;
  color: #1f2937;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  position: relative;
}

.info-value::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: 0;
  width: 0;
  height: 3px;
  background: linear-gradient(90deg, #E87D7D, #ec4899, #fbbf24);
  transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 2px;
}

.info-item:hover .info-value::after {
  width: 100%;
}

.info-value {
  font-size: 1.25rem;
  font-weight: 800;
  color: #1f2937;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  position: relative;
  transition: all 0.3s ease;
}

.info-item:hover .info-value {
  color: #E87D7D;
  transform: scale(1.05);
}

.introduction-section {
  background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
  padding: 36px;
  border-radius: 24px;
  border: 1px solid rgba(233, 236, 239, 0.8);
  margin-bottom: 40px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
  position: relative;
  overflow: hidden;
  transition: all 0.4s ease;
}

.introduction-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, #E87D7D, #ec4899, #fbbf24);
  opacity: 0.8;
}

.introduction-section:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 32px rgba(232, 125, 125, 0.15);
  border-color: rgba(232, 125, 125, 0.3);
}

.section-title {
  font-size: 2.5rem;
  font-weight: 700;
  color: #2c3e50;
  margin-bottom: 20px;
  text-align: center;
  position: relative;
}

.introduction-content {
  font-size: 16px;
  line-height: 1.6;
  color: #4b5563;
  text-align: center;
  min-height: 60px;
}

.action-section {
  padding: 20px 0;
}

.action-buttons {
  display: flex;
  gap: 16px;
  justify-content: center;
  flex-wrap: wrap;
}

.action-btn {
  font-weight: 700;
  text-transform: none;
  letter-spacing: 0.5px;
  padding: 14px 20px;
  font-size: 0.95rem;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  min-width: 130px;
  border-radius: 16px;
  border: 2px solid #e9ecef;
  background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
  color: #6c757d;
  position: relative;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.action-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(232, 125, 125, 0.1), transparent);
  transition: left 0.5s ease;
}

.action-btn:hover {
  border-color: #E87D7D;
  color: #E87D7D;
  transform: translateY(-3px) scale(1.02);
  box-shadow: 0 8px 20px rgba(232, 125, 125, 0.2);
  background: linear-gradient(145deg, #fef7f7 0%, #fdf2f2 100%);
}

.action-btn:hover::before {
  left: 100%;
}

.primary-action {
  background: linear-gradient(135deg, #E87D7D 0%, #ec4899 100%) !important;
  color: white !important;
  border-color: #E87D7D !important;
  box-shadow: 0 6px 20px rgba(232, 125, 125, 0.3) !important;
  position: relative;
  overflow: hidden;
}

.primary-action::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.5s ease;
}

.primary-action:hover {
  background: linear-gradient(135deg, #d66b6b 0%, #db2777 100%) !important;
  border-color: #d66b6b !important;
  transform: translateY(-3px) scale(1.02);
  box-shadow: 0 10px 25px rgba(232, 125, 125, 0.4) !important;
}

.primary-action:hover::before {
  left: 100%;
}

/* ÏàòÏ†ï Î™®Îìú Ïä§ÌÉÄÏùº */
.edit-input {
  width: 100%;
}

.edit-textarea {
  width: 100%;
}

/* Î∞òÏùëÌòï */
@media (max-width: 768px) {
  .main-info-section {
    flex-direction: column;
    gap: 30px;
  }
  
  .info-grid {
    grid-template-columns: 1fr;
    gap: 16px;
  }
  
  .action-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .action-btn {
    width: 100%;
    max-width: 300px;
  }
}

.debug-info {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-bottom: 25px;
}

.debug-info .v-chip {
  font-size: 0.9rem;
}



.delete-confirm-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px;
}

.delete-icon-container {
  margin-bottom: 20px;
}

.delete-icon-container .v-icon {
  font-size: 64px;
  color: var(--v-theme-error);
}

.delete-confirm-content .text-h5 {
  margin-bottom: 15px;
}

.delete-confirm-content .text-body-1 {
  margin-bottom: 20px;
}

.delete-warning {
  display: flex;
  align-items: center;
  color: var(--v-theme-on-surface-variant);
  font-size: 0.9rem;
  font-weight: 500;
}

.delete-warning .v-icon {
  font-size: 20px;
  color: var(--v-theme-warning);
  margin-right: 8px;
}

.delete-actions {
  display: flex;
  justify-content: center;
  gap: 15px;
  flex-wrap: wrap;
}

.delete-actions .v-btn {
  padding: 12px 24px;
  font-size: 1rem;
}

.v-snackbar {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 9999;
}

/* Î∞òÏùëÌòï ÎîîÏûêÏù∏ */
@media (max-width: 1200px) {
  .pet-detail-content {
    padding: 0 15px;
  }
  .info-cards {
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  }
}

@media (max-width: 960px) {
  .pet-hero-section {
    height: 350px;
  }
  .pet-name {
    font-size: 3rem;
  }
  .pet-species {
    font-size: 1.3rem;
  }
  .pet-description {
    font-size: 1rem;
  }
  .action-buttons {
    flex-direction: column;
    gap: 10px;
  }
  .action-btn {
    width: 100%;
    min-width: 200px;
  }
  .info-cards {
    grid-template-columns: 1fr;
    gap: 20px;
  }
  .info-card {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }
  .card-icon {
    width: 100%;
    justify-content: flex-start;
  }
  .card-icon .v-icon {
    font-size: 2rem;
  }
  .card-content {
    text-align: left;
  }
  .card-label {
    font-size: 0.9rem;
  }
  .card-value {
    font-size: 1rem;
  }
  .bottom-actions {
    padding: 0 15px 20px;
  }
  .back-btn {
    width: 100%;
    min-width: 200px;
  }
  .edit-header {
    flex-direction: column;
    align-items: stretch;
    gap: 10px;
  }
  .edit-title {
    justify-content: center;
  }
  .edit-title .v-icon {
    margin-right: 0;
  }
  .close-btn {
    align-self: flex-end;
  }
  .edit-content {
    padding: 15px;
  }
  .not-found-content {
    padding: 30px 15px;
  }
  .debug-info {
    flex-direction: column;
    gap: 10px;
  }
  .debug-info .v-chip {
    width: 100%;
    justify-content: center;
  }
  .not-found-actions {
    flex-direction: column;
    gap: 10px;
  }

}

@media (max-width: 768px) {
  .pet-hero-section {
    height: 300px;
  }
  .pet-name {
    font-size: 2.5rem;
  }
  .pet-species {
    font-size: 1.1rem;
  }
  .pet-description {
    font-size: 0.9rem;
  }
  .representative-badge {
    top: 5px;
    right: 5px;
    padding: 4px 8px;
    font-size: 0.6rem;
  }
  .representative-badge .v-icon {
    font-size: 14px;
  }
  .representative-badge span {
    font-size: 0.7rem;
  }
}

@media (max-width: 480px) {
  .pet-hero-section {
    height: 250px;
  }
  .pet-name {
    font-size: 2rem;
  }
  .pet-species {
    font-size: 1rem;
  }
  .pet-description {
    font-size: 0.8rem;
  }
  .action-btn {
    font-size: 0.9rem;
    padding: 10px 20px;
  }
  .primary-action {
    font-size: 0.9rem;
  }
  .info-card {
    padding: 15px;
  }
  .card-icon .v-icon {
    font-size: 2rem;
  }
  .card-label {
    font-size: 0.8rem;
  }
  .card-value {
    font-size: 0.9rem;
  }
  .back-btn {
    font-size: 0.9rem;
    padding: 10px 20px;
  }
  .edit-header {
    padding: 15px;
  }
  .edit-title {
    font-size: 1.8rem;
  }
  .edit-title .v-icon {
    font-size: 2rem;
  }
  .close-btn {
    padding: 6px;
  }
  .edit-content {
    padding: 10px;
  }
}

.v-card-title .v-icon {
  margin-right: 8px;
}


</style>

