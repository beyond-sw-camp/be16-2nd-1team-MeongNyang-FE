## 🐾 멍멍냥냥 [![Ask DeepWiki](https://deepwiki.com/badge.svg)](https://deepwiki.com/beyond-sw-camp/be16-2nd-1team-MeongNyang-BE)
<p align = "center">
    <img width="128" height="128" alt="image" src="https://github.com/user-attachments/assets/ec18fb22-4a1a-439c-92b6-ac0dc3cd1ac7" />
</p>

## 📌 프로젝트 기획

### 1. 프로젝트 개요  
**멍멍냥냥**은 반려인들의 **일상·커뮤니티·거래·소통**을 하나의 플랫폼에 통합한 **반려 생활 올인원 서비스**입니다.  

국내 반려동물 양육 인구는 이미 1,500만 명을 돌파했지만, 현재 서비스는 여전히 분산적입니다.  
- 일상 기록은 SNS  
- 정보 공유는 커뮤니티  
- 거래는 중고마켓  
- 소통은 메신저  

이처럼 **여러 플랫폼을 동시에 사용해야 하는 불편함**을 해소하고, 반려인들의 모든 니즈를 충족할 수 있는 통합 환경을 제공하는 것이 **멍멍냥냥의 핵심 목표**입니다.  

### 2. 비전과 목표  
- 🐾 **기록과 추억**: 반려동물의 일상과 성장을 손쉽게 기록  
- 🐾 **소통과 교류**: 반려인들이 경험과 노하우를 공유하는 커뮤니티  
- 🐾 **안전한 거래**: 반려동물 용품을 신뢰 기반으로 거래할 수 있는 마켓  
- 🐾 **실시간 연결**: 채팅·알림을 통해 즉각적인 커뮤니케이션 지원  

👉 단순한 기능 제공을 넘어, **반려동물과 함께하는 라이프스타일 생태계**를 구축합니다.  


### 3. 타겟 사용자  
- **주요 타겟 (20~40대 반려인)**  
  - 반려동물과의 일상을 기록하고 공유하고 싶은 사용자  
  - 커뮤니티에서 정보를 얻고 싶은 사용자  
  - 중고/새 용품을 안전하게 거래하고 싶은 사용자  

- **부 타겟**  
  - 반려동물 입양을 고려하는 예비 반려인  
  - 펫샵·동물병원 등 반려동물 관련 비즈니스 운영자  


### 4. 기대 효과  
- 🚀 **사용자 경험 혁신**  
  - 일상·커뮤니티·거래·소통을 하나로 연결하여 완전한 서비스 제공  

- 🤝 **신뢰 기반 거래**  
  - 커뮤니티와 연결된 **안전한 거래 환경** 조성  

- 💡 **데이터 기반 확장성**  
  - 사용자 활동 데이터를 기반으로 **맞춤형 추천 서비스** 제공  

- 🌐 **B2B 협력 기회**  
  - 반려동물 관련 비즈니스와의 파트너십 및 제휴 가능성 확보
    
## 👥 팀원 소개
<table>
    <tr>
    <td align="center"> 정지완(팀장)</td>
    <td align="center"> 윤수오(팀원)</td>
    <td align="center"> 김지현(팀원)</td>
    <td align="center"> 이우영(팀원)</td>
  </tr>
  <tr>
      <td align="center"><a href="https://github.com/FOJF" target="_blank"><img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=github&logoColor=white"/></a>
    <td align="center"><a href="https://github.com/SuOhYoon" target="_blank"><img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=github&logoColor=white"/></a>
    </td>
    </td>
    <td align="center"><a href="https://github.com/userkimjihyeon" target="_blank"><img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=github&logoColor=white"/></a> 
    </td>
    <td align="center"><a href="https://github.com/ggj0228" target="_blank"><img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=github&logoColor=white"/></a>
    </td>
  </tr>
</table>

## 기술 스택
### 🗄️ Database
![MariaDB](https://img.shields.io/badge/MariaDB-003545?style=for-the-badge&logo=mariadb&logoColor=white)
![Redis](https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=redis&logoColor=white)

### 🔙 Backend
![Java 17](https://img.shields.io/badge/Java%2017-007396?style=for-the-badge&logo=openjdk&logoColor=white)
![Spring Boot](https://img.shields.io/badge/Spring%20Boot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white)
![Spring Data JPA](https://img.shields.io/badge/Spring%20Data%20JPA-6DB33F?style=for-the-badge&logo=spring&logoColor=white)
![Spring Security](https://img.shields.io/badge/Spring%20Security-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white)
![OAuth2](https://img.shields.io/badge/OAuth2-000000?style=for-the-badge&logo=auth0&logoColor=white)
![SSE](https://img.shields.io/badge/SSE(Server--Sent%20Events)-000000?style=for-the-badge)
![WebSocket](https://img.shields.io/badge/WebSocket-000000?style=for-the-badge&logo=websocket&logoColor=white)
![STOMP](https://img.shields.io/badge/STOMP-000000?style=for-the-badge)
![SockJS](https://img.shields.io/badge/SockJS-000000?style=for-the-badge)
![AWS S3](https://img.shields.io/badge/AWS%20S3-569A31?style=for-the-badge&logo=amazons3&logoColor=white)
![SMTP](https://img.shields.io/badge/SMTP-FF6600?style=for-the-badge&logo=gmail&logoColor=white)
![Docker](https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white)
![JMeter](https://img.shields.io/badge/JMeter-D22128?style=for-the-badge&logo=apachejmeter&logoColor=white)
![Gradle](https://img.shields.io/badge/gradle-02303A?style=for-the-badge&logo=gradle&logoColor=white)


### 🎨 Frontend
![JavaScript](https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black)
![Vue.js](https://img.shields.io/badge/Vue.js-4FC08D?style=for-the-badge&logo=vue.js&logoColor=white)
![Vue Router](https://img.shields.io/badge/Vue%20Router-4FC08D?style=for-the-badge)
![Vuetify](https://img.shields.io/badge/Vuetify-1867C0?style=for-the-badge&logo=vuetify&logoColor=white)
![Pinia](https://img.shields.io/badge/Pinia-FFD859?style=for-the-badge&logo=vue.js&logoColor=black)
![Axios](https://img.shields.io/badge/Axios-5A29E4?style=for-the-badge&logo=axios&logoColor=white)

### 🧑‍💻 Tools
![Notion](https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=notion&logoColor=white)
![Git](https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=git&logoColor=white)
![GitHub](https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=github&logoColor=white)
![Figma](https://img.shields.io/badge/Figma-F24E1E?style=for-the-badge&logo=figma&logoColor=white)

## 화면 설계서
<div style="font-size: 1.5em; font-weight: bold; margin-top: 20px;">
  <a href='https://www.figma.com/design/9EuV7bZ8gteSS0VeWFtBZj/%EB%A9%94%EC%9D%B8-%ED%8E%98%EC%9D%B4%EC%A7%80?node-id=274-579&t=P1AzF8eUgYE37t51-0' style="text-decoration: none; color: inherit;">
    화면 설계서
  </a>
</div>

## 요구사항 정의 및 명세서(SRS)
<div style="font-size: 1.5em; font-weight: bold; margin-top: 20px;">
  <a href='https://docs.google.com/spreadsheets/d/1_HHbkM-qIh_VRlckDM2gnEV2z01KgckhMvfeGRZ-UAQ/edit?gid=809966690#gid=809966690' style="text-decoration: none; color: inherit;">
    요구사항 명세서
  </a>
</div>

## WBS
<div style="font-size: 1.5em; font-weight: bold; margin-top: 20px;">
  <a href='https://docs.google.com/spreadsheets/d/1_HHbkM-qIh_VRlckDM2gnEV2z01KgckhMvfeGRZ-UAQ/edit?gid=382613662#gid=382613662' style="text-decoration: none; color: inherit;">
    WBS
  </a>
</div>

## API 명세서
<div style="font-size: 1.5em; font-weight: bold; margin-top: 20px;">
  <a href='https://docs.google.com/spreadsheets/d/1_HHbkM-qIh_VRlckDM2gnEV2z01KgckhMvfeGRZ-UAQ/edit?gid=382613662#gid=382613662' style="text-decoration: none; color: inherit;">
    API 명세서
  </a>
</div>

## ERD
<div style="font-size: 1.5em; font-weight: bold; margin-top: 20px;">
  <a href='https://www.erdcloud.com/d/fRviLvokK3rgCy2iS' style="text-decoration: none; color: inherit;">
    ERD
  </a>
<img width="1400" height="683" alt="Image" src="https://github.com/user-attachments/assets/a8bf5877-8843-4600-ae58-9e038cf243f9" />
</div>

## 주요 기능
- 🏠 **홈**: 커뮤니티 소개 및 메인 페이지
- 🐕 **반려동물 관리**: 반려동물 등록, 수정, 조회
- 📖 **다이어리**: 반려동물과의 일상 기록
- 🛒 **마켓**: 반려동물 관련 상품 거래
- 💬 **채팅**: 실시간 채팅방 기능
- 👤 **사용자 관리**: 회원가입, 로그인, 프로필 관리
- 🛡️ **관리자**: 관리자 전용 기능

## 🏗 아키텍처
### 애플리케이션(개념)
<p align="center">
 <img width="611" height="671" alt="image" src="https://github.com/user-attachments/assets/8a0e448f-a005-47d9-a19c-fd9770917981" />
</p>

### 배포/인프라(EKS)
<p align="center">
    <img width="668" height="397" alt="k8s" src="https://github.com/user-attachments/assets/e7e6f075-51e7-4f46-8aac-553d80475b76" />
</p>

<details>
<summary>요약(읽기 메모)</summary>

- **클라이언트**: Vue3 · Vuetify · Pinia  
- **백엔드**: Spring Boot 3.x · Security/JWT · WebSocket/STOMP · SSE  
- **데이터**: MariaDB(주요 데이터) · Redis(세션/캐시/채팅) · S3(이미지/파일)  
- **인프라**: EKS · Ingress(ALB) · ECR · Route53 · CloudFront
</details>


## 주요 사용 기술
<details><summary>🚫 SSE를 이용한 사용자 서비스 접근 차단/차단해제</summary>
    
### 개요
관리자가 서버에 **차단 요청**을 보내면, 서버는 **DB에서 대상 사용자 ID를 조회**한 뒤, **Enum 상태값**을 변경하여 차단 상태로 전환합니다.  
이후 이벤트를 **Redis Pub/Sub**과 **SSE(Server-Sent Events)** 를 통해 실시간으로 프론트엔드에 전달합니다.  
프론트엔드는 이벤트를 수신하면 즉시 **Access Token을 재발급**받아 새로운 권한을 반영하고, 차단된 사용자는 서비스 접근이 제한됩니다.  

### 주요 기술 스택
- **Spring Boot**: REST API 및 SSE 엔드포인트 제공
- **JPA & Enum**: 사용자 상태 관리 (`TEMPORARY_BLOCK`, `PERMANENT_BLOCK` 등)
- **Redis Pub/Sub**: 이벤트 브로드캐스팅
- **SSE (Server-Sent Events)**: 실시간 권한 변경 알림
- **JWT**: Access/Refresh Token 기반 인증

### 성능 최적화 포인트
- **HTTP 기반 단일 연결 유지**: SSE는 **단방향 스트리밍(서버→클라이언트)** 으로 동작하여, WebSocket 대비 구현 복잡도가 낮으면서도 지속적인 연결 유지 가능  
- **낮은 네트워크 오버헤드**: 별도의 핸드셰이크 없이 표준 HTTP 연결로 유지되므로, 다수의 클라이언트 환경에서도 **네트워크 비용 최소화**  
- **실시간 반영**: 서버에서 이벤트 발생 시 클라이언트로 즉시 Push → **폴링(Polling) 대비 레이턴시 극소화**  
- **확장성**: Redis Pub/Sub과 결합해 다수의 애플리케이션 인스턴스에서도 **수평 확장(Scale-out)** 가능  
- **브라우저 친화적**: SSE는 브라우저 기본 이벤트 소스를 통해 동작 → 클라이언트 단 구현 부담 감소 및 안정성 확보  

### 특징
- **실시간 반영**: 차단/해제 이벤트가 지연 없이 프론트로 전달  
- **무상태 인증 구조**: Refresh Token을 통한 Access Token 재발급으로 세션 의존성 제거  
- **보안 강화**: 차단 즉시 새로운 토큰을 발급받아 권한이 반영되므로, 이전 토큰으로는 서비스 접근 불가  
- **트래픽 효율성**: 클라이언트-서버 간 불필요한 재연결이나 반복 요청 없이 효율적으로 이벤트 전송
</details>
<details><summary>👍 동시성 이슈를 해결한 좋아요 기능 (with Redis)</summary>
    
### 개요
사용자가 **좋아요 요청**을 하면, 서비스는 **DB와 Redis**를 먼저 조회하여 중복 여부를 확인합니다.  
- 좋아요가 없는 경우: **Redis(Key-Value 쌍)** 에 먼저 저장 후, DB에도 반영  
- 좋아요가 이미 존재하는 경우: 요청 차단 처리  
- 좋아요 수 조회: **DB의 ID를 Redis Key로 사용**하여 In-Memory에서 초고속 조회  

### 주요 기술 스택
- **Spring Boot**: REST API 및 서비스 로직 구현
- **Redis**: In-Memory 기반 데이터 저장소 (Key-Value Store)
- **JPA & Database**: 영속 데이터 저장
- **Cache 전략**: Redis 캐시를 활용한 조회 성능 최적화

### 성능 최적화 포인트
- **In-Memory 기반 데이터베이스**: Redis는 메모리 상에서 동작하므로, 디스크 기반 DB에 비해 조회 및 쓰기 속도가 월등히 빠름 (μs 단위 응답)  
- **싱글 스레드 아키텍처**: Redis는 싱글 스레드 이벤트 루프 구조를 사용해 **락(lock) 경쟁 없이 직렬화된 처리**가 가능 → 높은 처리량 보장  
- **캐시 히트율 향상**: 좋아요 수와 상태를 Redis에 캐싱하여, **DB 부하를 최소화**하고 조회 요청의 대부분을 In-Memory에서 처리  
- **Write-Through 전략**: Redis 반영 후 DB에 동기화하여 데이터 일관성 유지  
- **확장성**: 많은 동시 접속자가 좋아요를 눌러도 Redis를 통한 빠른 응답 처리 가능  

### 특징
- **중복 방지**: Redis 조회를 통한 실시간 중복 체크  
- **고성능 조회**: 좋아요 수를 DB 대신 In-Memory(Redis)에서 조회  
- **데이터 일관성 보장**: Redis ↔ DB 동기화 구조  
- **서비스 안정성**: 트래픽 급증 상황에서도 지연 없는 사용자 경험 제공  
</details>
<details>
    <summary>💬 WebSocket(STOMP), SSE, Redis Pub/Sub을 활용한 확장형 실시간 채팅 시스템 아키텍처</summary>
    <detail>
        
## 1. STOMP (WebSocket 기반)
- **적용 이유**  
  - 채팅방 내에서 유저들이 실시간으로 메시지를 주고받을 수 있도록 양방향 통신을 지원  
- **구현 내용**  
  - 클라이언트가 채팅방에 접속하면 **WebSocket**을 통해 **STOMP 프로토콜**로 메시지를 송수신  
  - 빠르고 안정적인 데이터 전송을 구현하여 실시간 채팅 경험 제공  

---

## 2. SSE (Server-Sent Events)
- **적용 이유**  
  - 채팅방에 직접 접속하지 않아도 채팅방 목록의 최신 상태를 실시간으로 확인 가능  
  - 알림(Notification)을 실시간으로 사용자에게 전달하기 위함  
- **구현 내용**  
  - 채팅방 리스트 화면에서 새로운 메시지, 변경 사항, 알림 이벤트 등을 즉시 반영  
- **추가 장점**  
  - 단방향 스트리밍 기반으로 리소스 사용이 효율적이며, 서버 → 클라이언트 알림 전달에 적합  

---

## 3. Redis (Pub/Sub & Caching)
- **적용 이유**  
  - STOMP와 SSE는 애플리케이션 서버 메모리에 의존 → 서버 확장 시 데이터 동기화 한계 발생  
  - 메시지를 중앙에서 관리하기 위해 **Redis Pub/Sub** 도입  
  - 실시간 **읽음 처리**를 안정적으로 구현하기 위해 Redis 캐싱 기능 활용  
    - (RDB에 직접 의존할 경우 발생할 수 있는 동시성 문제를 **Redis의 싱글 스레드 & In-memory 특성**으로 해결)  
- **구현 내용**  
  - 여러 서버 인스턴스에서 동시에 메시지를 발행/구독 → 수평 확장 시에도 실시간 데이터 동기화 보장  
  - Redis에 `참여자 목록`, `온라인 여부`, `참여자별 마지막으로 읽은 메세지 ID`를 캐싱  
  - 참여자 변동, 상태 변경, 메시지 발생 시 클라이언트와 Redis 데이터를 연동하여 **실시간 읽음 상태 반영**  
- **효과**  
  - 다중 서버 환경에서도 안정적인 채팅 및 알림 제공  
  - 클라이언트는 실시간으로 **읽음 여부 확인** 가능
    </detail>
</details>    
<details><summary>📍 실시간 지도 기반 거래 위치 지정</summary>

###  서비스 개요
사용자는 거래글 작성 시 **카카오맵 지도 API**를 활용하여 지도 위에 핀을 찍어 거래 장소를 지정합니다.  
프론트엔드는 사용자가 선택한 **위·경도(lat, lng)와 주소 정보**를 서버로 전달하고,  
백엔드는 이를 **DB에 저장**하여 거래글과 함께 관리합니다.  
상세 페이지에서는 저장된 좌표를 기반으로 다시 지도를 출력해 거래 장소를 직관적으로 확인할 수 있습니다.  

---

###  주요 기술 스택

**Frontend**
- Vue.js & Vuetify: 거래글 작성/상세 화면 UI  
- Kakao Maps API: 지도 렌더링, 핀 배치, 좌표 → 주소 변환  
- Axios: 백엔드 API와 데이터 연동  

**Backend**
- Spring Boot: 거래글 REST API  
- JPA & DTO: 위도(latitude), 경도(longitude) 관리  
- MariaDB: 거래글 및 위치 정보 저장  
- AWS S3: 거래 이미지 저장소  

---

###  특징
- **직관적 위치 선택**: 클릭/드래그 방식으로 손쉽게 거래 장소 지정 가능  
- **정확한 좌표 기반 저장**: 주소 문자열이 아닌 위·경도 좌표를 저장해 데이터 활용성 극대화  
- **실시간 주소 변환**: 카카오맵 Geocoder API로 좌표 → 주소 변환 즉시 반영  
- **상세 페이지 시각화**: 저장된 좌표를 바탕으로 지도와 마커를 표시해 직관적인 UX 제공  
- **확장성**: 위치 데이터 기반 검색(예: 반경 5km 내 거래글 조회) 등 확장 가능  

---

###  동작 흐름
1. **사용자**: 거래글 작성 시 지도에서 핀으로 위치 선택  
2. **프론트엔드**: 선택한 위·경도와 주소를 백엔드로 전송  
3. **백엔드**: 거래글과 함께 DB에 위치 정보 저장  
4. **프론트엔드 상세 페이지**: 저장된 좌표를 지도 위에 표시하여 직관적으로 제공  
</details> 
<details><summary>🔐 JWT, CORS, STOMP를 이용한인증/권한 및 네트워크 보안 설계</summary>
    
## 설계 의도 & 근거

### 인증/토큰
- JWT: AT(단기) / RT(중장기) 분리, RT는 Redis 보관·검증
- 재발급: 클라이언트는 RT를 **헤더**로 전달, 서버는 Redis와 대조 후 새 AT 발급
- 확장 옵션: RT 회전(Rotation)·재사용 탐지(Reuse Detection)

### CORS 정책
- 개발 오리진 화이트리스트(예: localhost 3000/5173), 필요한 메서드·헤더만 허용
- `allowCredentials(true)`: STOMP를 SockJS 폴백(XHR)로 사용할 때 브라우저가 자격증명 응답을 요구

### Preflight / Credentials 메모
- Preflight: 커스텀 헤더·비단순 메서드·특정 Content-Type 사용 시 브라우저가 본요청 전 `OPTIONS`로 허용 여부 확인
- Credentials 모드: 교차 출처에서 쿠키/HTTP 인증 등을 보낼 수 있게 한 모드  
  - 이 경우 응답에 **정확한 Origin**과 `Access-Control-Allow-Credentials: true` 필수  
  - 미충족 시 브라우저가 응답을 폐기

### 헤더 기반 인증 시 CORS가 더 엄격하게 보이는 이유
- 커스텀 헤더 사용은 Preflight를 유발 → 서버가 메서드/헤더/오리진을 명시 허용해야 본요청 진행
- SockJS 폴백은 XHR이라 CORS 규칙 적용, 경우에 따라 credentials 모드 활성화
- 동일 오리진(프록시) 환경에서는 CORS가 발생하지 않지만, 교차 오리진에서는 규칙이 그대로 적용

### OAuth(소셜) 흐름 요약
- 공급자 인증 → 코드 교환 → 프로필 조회
- 계정 연결: 동일 이메일은 연동, 없으면 추가정보 입력 후 가입 완료
- 보안 포인트: redirect URI 화이트리스트, state/nonce 검증, 짧은 AT·긴 RT, 실패/중복 응답 표준화

### STOMP(WebSocket) 전략
- 순수 WebSocket은 CORS 비대상, SockJS 폴백(XHR)은 CORS 적용
</details>
<details><summary>✉️ SMTP를 이용한 이메일 인증 · 계정 복구</summary>

### SMTP/Email (인증코드)

- **코드 생성/만료**
  - 6자리 난수 생성, **TTL(분 단위) 부여**, 검증 성공 시 **즉시 무효화**

- **저장/제어 (Redis)**
  - `email:code:{email}` 키로 코드 보관(**TTL 적용**)
  - **재발송 쿨다운** 및 **시도 횟수 카운터**를 Redis로 관리
  - 최근 발급 코드만 유효하도록 **후진 방지** 처리

- **검증 흐름**
  - 입력 코드 비교 → 성공 시 무효화, 실패 누적 시 **일시 잠금**

- **발송**
  - Spring Mail(JavaMailSender)로 **SMTP(STARTTLS)** 전송

### Password Reset (임시 비밀번호)

- **발급 트리거**: 이메일 소유 확인 후 임시 비밀번호 발급(메일 전송)
- **생성/만료**: 영문·숫자 혼합 난수, **TTL 부여**, **1회용**(사용/변경 시 즉시 무효화)
- **저장 방식**: 평문 저장 없음 → 서버에는 **해시만 저장**, Redis에는 **발급 상태/TTL**만 보관
- **전송**: SMTP로 발급 메일 송신(만료 시각 안내 포함)
- **로그인 정책**: 임시 비밀번호로 로그인 시 **즉시 비밀번호 변경 강제**
- **보호 장치**: **재발급 쿨다운**, **최대 시도 횟수** 제한, 실패 누적 시 **일시 잠금**
---

## 보안·운영 하이라이트

### 현재 적용(담당)
- JWT 분리: AT(단기) / RT(중장기), **민감정보 토큰 미포함**
- RT **Redis 저장·검증**, 로그아웃 시 해당 RT 무효화
</details>   
<details><summary>🛒 Toss Payments 기반 결제 아키텍처</summary>

### 서비스 개요
사용자가 거래글에서 결제를 진행하면 **Toss Payments API**를 통해 안전하게 결제가 처리됩니다.  
프론트엔드는 결제 시도 후 Toss에서 반환한 `paymentKey`, `orderId`, `amount`를 서버로 전달하고,  
백엔드는 **confirm API**를 호출해 최종 결제 승인 및 내부 검증을 수행합니다.  
승인이 완료되면 판매자에게 포인트가 적립되고 상품 상태가 `SOLD`로 변경됩니다.  

---

### 주요 기술 스택

**Frontend**
- Vue.js & Vuetify: 결제 요청/완료 화면 UI  
- Toss Payments SDK: 결제창 호출 및 결제 결과 수신  
- Axios: 결제 데이터 백엔드 전송  

**Backend**
- Spring Boot: 결제 승인 REST API  
- Toss Payments Confirm API: 최종 결제 승인 처리  
- JPA & MariaDB: 거래 내역 및 포인트 저장  
- Notification Service: 판매자 알림 발송  

---

### 특징
- **단일 승인 프로세스**: confirm API 하나로 검증과 승인까지 처리  
- **내부 검증 로직**: 채팅방 참여자 여부, 판매자 승인 여부, 상품 판매 상태, 금액 일치 여부 확인  
- **즉시 정산 구조**: 승인 완료 시 판매자 포인트 적립 및 거래 상태 갱신  
- **안전한 결제 처리**: 외부 PG사(Toss)를 통한 안정적인 결제 보장  

---

### 동작 흐름
1. **사용자**: 결제 수단 선택 후 결제 시도  
2. **Toss**: 카드사/은행과 통신 → 결제 결과 반환  
3. **프론트엔드**: 성공 시 `paymentKey`, `orderId`, `amount`를 서버로 전달  
4. **백엔드**: Toss **confirm API** 호출 + 내부 검증 수행  
5. **승인 완료 후 처리**:  
   - 판매자 포인트 적립  
   - 상품 상태 `SOLD`로 변경  
   - 거래 내역(Transaction) 저장  
   - 판매자 알림(Notification) 발송  

</details>


## 테스트 결과서
<details><summary>전체 시연 영상</summary>
</details>
<details>
  <summary>일기</summary>
  <details><summary>홈 화면(전체 일기 목록)</summary>
    <img width="1470" height="956" alt="스크린샷 2025-09-11 오전 9 14 03" src="https://github.com/user-attachments/assets/c0ba04da-b531-424b-80bc-d99145276d27" />
  </details>

  <details><summary>대시보드</summary>
      <img width="1470" height="956" alt="스크린샷 2025-09-11 오전 9 17 33" src="https://github.com/user-attachments/assets/ea01519c-7450-4091-8550-167dbf993ac5" />
  </details>

  <details><summary>내 일기 목록</summary>
    <img width="1470" height="956" alt="스크린샷 2025-09-11 오전 9 19 09" src="https://github.com/user-attachments/assets/800d60e8-0bb9-4f47-99c9-f08653779d87" />
  </details>

  <details><summary>내 일기 작성
  </summary><img width="1470" height="956" alt="스크린샷 2025-09-11 오전 9 20 33" src="https://github.com/user-attachments/assets/14dd517d-3faf-4c07-954f-a96e59a77379" />
  </details>
  <details><summary>내 일기 수정</summary>
    <img width="1470" height="956" alt="스크린샷 2025-09-11 오전 9 21 47" src="https://github.com/user-attachments/assets/a5bb8f5c-974b-44b5-8ae5-f932347dc459" />
  </details>
  <details><summary>일기 상세 조회</summary>
    <img width="896" height="796" alt="스크린샷 2025-09-11 오전 9 22 47" src="https://github.com/user-attachments/assets/2b5745f1-51ec-4f91-9eb5-384457753a14" />
  </details>
  <details><summary>댓글 조회</summary>
    <img width="1470" height="795" alt="스크린샷 2025-09-11 오전 9 23 19" src="https://github.com/user-attachments/assets/9720113a-3723-409e-8071-362b9f11c08f" />
  </details>
  <details><summary>좋아요 조회</summary>
    <img width="952" height="797" alt="image" src="https://github.com/user-attachments/assets/928b4912-5a0a-4c98-b053-9ff862729b1e" />
  </details>
  <details><summary>검색 결과</summary>
    <img width="1470" height="956" alt="스크린샷 2025-09-11 오전 9 26 17" src="https://github.com/user-attachments/assets/dba30c5c-2f4a-454a-9163-0abf10e2593c" />
  </details>
  <details><summary>팔로우 조회</summary>
    <img width="1470" height="956" alt="스크린샷 2025-09-11 오전 9 25 09" src="https://github.com/user-attachments/assets/0a5ec57e-025b-4861-be2a-139674a2e347" />
  </details>
</details>

<details>
  <summary>마켓</summary>
  <details><summary>홈 화면(전체 거래글 목록)</summary>
     <img width="1919" height="864" alt="Image" src="https://github.com/user-attachments/assets/4cccfa9b-fa97-434a-9bd6-b96f53772c08" />
  </details>

  <details><summary>거래글 작성</summary>
     <img width="1919" height="862" alt="Image" src="https://github.com/user-attachments/assets/772f39ad-e559-4666-a5dd-a1cc7a562afd" />
  </details>

  <details><summary>거래글 수정/삭제</summary>
    <img width="1919" height="869" alt="Image" src="https://github.com/user-attachments/assets/845698bd-487e-4008-8b85-4bf4e1da67a5" />
  </details>

  <details><summary>거래글 상세</summary>
    <img width="1916" height="864" alt="Image" src="https://github.com/user-attachments/assets/92584abe-1e35-4ec7-b45a-1c0f0bccc21a" />
  </details>
  
  <details><summary>거래내역 조회</summary>
    <img width="1916" height="863" alt="Image" src="https://github.com/user-attachments/assets/1837cc5e-1199-4192-afbc-67e7857fb37a" />
  </details>
  
  <details><summary>찜목록 조회</summary>
    <img width="1919" height="864" alt="Image" src="https://github.com/user-attachments/assets/89194667-9aef-4bd5-b8ff-fb382285c997" />
  </details>
</details>

<details>
  <summary>채팅</summary>
    
  <details><summary>채팅방 목록 조회</summary>
      <img width="1728" height="1117" alt="스크린샷 2025-08-26 오후 2 01 50" src="https://github.com/user-attachments/assets/890c71ab-274f-434a-9a56-13decf8a3828" />
  </details>

  <details><summary>채팅방 생성</summary>
      
https://github.com/user-attachments/assets/86f6cb9a-825c-4519-b866-6a8543fa6d6c


  </details>

  <details><summary>퀵 메세지</summary>
      
https://github.com/user-attachments/assets/f2c1b6a4-29ed-4e90-b58e-ffdd8eea2f7f


  </details>

  <details><summary>SSE 채팅방 목록 갱신</summary>
      
https://github.com/user-attachments/assets/fac8e7d8-8fab-425f-9341-ddfb83e8b021


  </details>
  
  <details><summary>메세지 전송</summary>
      
https://github.com/user-attachments/assets/dfe16ea2-be8c-47a1-b7b4-3bc30ce8a72c


  </details>
  
  <details><summary>파일 드래그 앤 드롭</summary>
      
https://github.com/user-attachments/assets/54976259-5eef-4a44-88d0-03bf5cc2bf19


  </details>
  
  <details><summary>파일 전송</summary> 
      
https://github.com/user-attachments/assets/cf7a55a0-cf0d-425c-a430-27c2d727b9e1


  </details>
  
  <details><summary>이미지 뷰어</summary> 
      
https://github.com/user-attachments/assets/1a796fe7-c6e6-456c-9354-c7897ca5c88c


  </details>
  
  <details><summary>최하단 이동</summary> 
      
https://github.com/user-attachments/assets/15dcd759-1349-4265-912f-358d0307401c


  </details>
  
  <details><summary>참여자 목록 조회</summary> 
      <img width="1728" height="1117" alt="스크린샷 2025-08-26 오후 2 15 10" src="https://github.com/user-attachments/assets/6455d238-1a62-4307-b927-47a21ffca110" />
  </details>
  
  <details><summary>채팅방 초대</summary> 
      
https://github.com/user-attachments/assets/c09dfa1d-54f2-4fe3-9395-09dafe59b952


  </details>
  
  <details><summary>채팅방 나가기</summary> 
      
https://github.com/user-attachments/assets/70c6eea7-7b0a-4b10-890a-09fd4b34534f


  </details>
</details>

<details>
  <summary>알림</summary>
    
  <details><summary>알림 삭제</summary>

https://github.com/user-attachments/assets/ccbd22f1-199d-40f9-9a5b-9f4ae1971d0f


  </details>

  <details><summary>알림 전체 삭제</summary>

https://github.com/user-attachments/assets/038ffba2-f859-4d4c-b2b7-3f4679839c2b


  </details>

  <details><summary>알림 전체 읽음</summary>

https://github.com/user-attachments/assets/2218d0a1-10af-4080-8f7b-78abaa612bc9


  </details>

</details>
<details>
    <summary>로그인</summary>
     <details><summary>로그인 화면</summary>
     <img width="830" height="744" alt="로그인화면" src="https://github.com/user-attachments/assets/f0cf6c4e-3adb-48eb-be0f-0863ef8d2d3b" />
      </details>
    <details>
       <summary>임시비밀번호 프로세스(계정잠금)</summary>
        <details><summary>로그인 시도 실패</summary>
     <img width="605" height="782" alt="로그인 시도 실패" src="https://github.com/user-attachments/assets/cf5132c6-924f-4457-8f10-1a3466d83c3a" />
      </details>
        <details><summary>계정 잠금처리</summary>
     <img width="509" height="772" alt="5번 실패시 계정 잠금처리" src="https://github.com/user-attachments/assets/528a6ae7-2177-4ea0-93b6-9a2c82234352" />
      </details>
         <details><summary>계정 잠금해제 화면</summary>
        <img width="587" height="652" alt="계정 잠금해제 화면" src="https://github.com/user-attachments/assets/ea16f65c-43fb-4fc6-85e4-1835ec538931" />
      </details>
        <details><summary>임시비밀번호 발급 화면</summary>
        <img width="575" height="544" alt="임시비번 발급" src="https://github.com/user-attachments/assets/5ade6c58-97ce-46f6-9481-788ee7322787" />
      </details>
        <details><summary>임시비밀번호 발급 내용(이메일)</summary>
        <img width="463" height="220" alt="임시비밀번호 발급내용" src="https://github.com/user-attachments/assets/c9894723-327a-4ceb-8051-16fbbf00be91" />
      </details>
    </details>
        <details><summary>일반 회원가입 유저의 소셜로그인 연동</summary>
        <img width="454" height="613" alt="스크린샷 2025-09-10 오후 3 53 29" src="https://github.com/user-attachments/assets/5627df31-2cae-4f70-8369-a27ae3f702d1" />
        </details>
        <details><summary>탈퇴한 계정으로 로그인 시도</summary>
                <summary>탈퇴한 일반회원가입 계정으로 로그인 시도</summary>
        <img width="531" height="451" alt="탈퇴한 계정으로 로그인 시도" src="https://github.com/user-attachments/assets/74b6b3a5-72f6-459a-bae5-234a7aee5a4d" />
                <summary>탈퇴한 소셜 연동 계정으로 로그인 시도</summary>
        <img width="520" height="439" alt="탈퇴한 소셜 로그인 계정으로 로그인 시도" src="https://github.com/user-attachments/assets/1d4faea0-680a-45b8-89a7-92fb3052a1a4" />
        </details>

</details>


</details>
<details>
  <summary>회원가입</summary>
      <details>
        <summary>회원가입 화면</summary>
        <img width="830" alt="회원가입 화면" src="https://github.com/user-attachments/assets/f0cf6c4e-3adb-48eb-be0f-0863ef8d2d3b" />
      </details>
<details>
  <summary>회원가입 프로세스</summary>
  <details>
    <summary>① 회원가입 후 인증 화면</summary>
    <img width="666" alt="회원가입 후 인증" src="https://github.com/user-attachments/assets/7838d9a9-d364-47af-94d6-f6af067678c4" />
  </details>

  <details>
    <summary>② 이메일 인증 코드</summary>
    <img width="448" alt="이메일 인증 코드" src="https://github.com/user-attachments/assets/e2c27c85-2b91-4542-8702-a6e544eeb429" />
  </details>

  <details>
    <summary>③ 인증 후 추가정보 기입</summary>
    <img width="482" alt="인증 후 추가정보 기입" src="https://github.com/user-attachments/assets/e1c9a539-a1c9-431f-8618-55d9e67dd07a" />
  </details>

  <details>
    <summary>④ 인증 후 추가정보 기입 2</summary>
    <img width="486" alt="인증 후 추가정보 기입 2" src="https://github.com/user-attachments/assets/493ae383-877a-478c-b635-222c62cb367e" />
  </details>
</details>
</details>
<details>
    <summary>마이페이지</summary>
    <details>
        <summary>화면</summary>
        <img width="522" height="796" alt="스크린샷 2025-09-10 오후 5 07 46" src="https://github.com/user-attachments/assets/0c845e95-3d87-4c46-9815-695b70f7d4d0" />
    </details>
    <details>
        <summary>계정 탈퇴</summary>
        <img width="347" height="464" alt="image" src="https://github.com/user-attachments/assets/05b249a2-cc40-48a2-8e48-67d090d494f9" />
    </details>
    <details>
        <summary>프로필 수정</summary>
        <img width="592" height="696" alt="스크린샷 2025-09-10 오후 6 44 11" src="https://github.com/user-attachments/assets/c81c5d1c-2af2-4b44-9581-eeec25b4860f" />
    </details>
    <details>
        <summary>비밀번호 변경</summary>
        <img width="477" height="694" alt="스크린샷 2025-09-10 오후 6 48 06" src="https://github.com/user-attachments/assets/37d1b3d7-ad14-4cd8-87b8-da2b654cf1bb" />
    </details>

</details>

<details>
    <summary>반려동물</summary>
    <details>
        <summary>반려동물 추가, 수정</summary>
        <details>
            <summary>반려동물 추가</summary>
            <summary>반려동물 추가(사진)</summary>
            <img width="757" height="769" alt="스크린샷 2025-09-10 오후 5 50 46" src="https://github.com/user-attachments/assets/e25b3bc0-d1ef-4b75-8adc-6bb8ddeab16f" />
            <summary>반려동물 추가(기본정보)</summary>
            <img width="451" height="704" alt="image" src="https://github.com/user-attachments/assets/87a676d4-47e9-472f-9246-2441705dfda5" />
            <summary>반려동물 추가(소개글)</summary>
            <img width="729" height="784" alt="스크린샷 2025-09-10 오후 5 54 04" src="https://github.com/user-attachments/assets/5e4baff8-c5b6-4f29-b270-1f4942ccd743" />
            <summary>반려동물 등록</summary>
            <img width="1098" height="881" alt="image" src="https://github.com/user-attachments/assets/4dbd5460-a55b-4d71-aa99-931d66d934d5" />
            <summary>반려동물 수정</summary>
            <img width="892" height="883" alt="image" src="https://github.com/user-attachments/assets/02222a3b-6f69-4342-8fff-d491f010a300" />
        </details>
    </details>
    <details>
        <summary>대표동물 설정</summary>
        <summary>대표동물 변경 전</summary>
        <img width="668" height="728" alt="스크린샷 2025-09-10 오후 5 56 14" src="https://github.com/user-attachments/assets/80bef9ca-59ba-495c-9622-79157235a13c" />
        <summary>대표동물 변경 후</summary>
        <img width="699" height="735" alt="image" src="https://github.com/user-attachments/assets/eb50be17-7559-4158-b3d2-a3490d574f64" />
    </details>
</details>
